@import 'tailwindcss';
@config '../../tailwind.config.ts';

:root {
  --color-scheme: light;
  --bg-base: #f7efe3;
  --bg-elevated: #f1e3ce;
  --bg-muted: #f5e7d4;
  --fg-base: #241f19;
  --fg-muted: #65543f;
  --border-soft: #e6d7c3;
  --border-strong: #cfbda3;
  --shadow-soft: rgba(33, 28, 25, 0.08);
  --shadow-strong: rgba(33, 28, 25, 0.18);
  color-scheme: var(--color-scheme);
}

body {
  min-height: 100vh;
  background: linear-gradient(180deg, #fdf7ed 0%, #f7eddc 42%, #f0e0c5 100%);
  color: var(--fg-base);
}

@layer base {
  * {
    @apply border-charcoal-200;
  }
}

@layer utilities {
  .text-balance {
    text-wrap: balance;
  }
}

@layer components {
  .panel {
    @apply rounded-3xl border border-cream-300/70 bg-cream-100/80 p-6 text-cocoa-800 shadow-xl backdrop-blur-md;
  }

  .panel-title {
    @apply text-lg font-semibold text-charcoal-900;
  }

  .panel-subtitle {
    @apply text-sm text-cocoa-500;
  }

  .field-label {
    @apply text-xs font-semibold uppercase tracking-[0.2em] text-cocoa-500;
  }

  .field-input {
    @apply w-full rounded-2xl border border-cream-400 bg-cream-50/80 px-3 py-2 text-sm text-cocoa-900 shadow-inner focus:border-accent-500 focus:outline-none focus:ring-2 focus:ring-accent-200 disabled:cursor-not-allowed disabled:bg-cream-200/60 disabled:text-cocoa-400;
  }

  .pill-button {
    @apply rounded-full border border-cream-400 bg-cream-100 px-3 py-2 text-sm font-medium text-cocoa-700 transition hover:bg-cream-200 hover:text-charcoal-900 focus:outline-none focus:ring-2 focus:ring-accent-200/60;
  }

  .cta-button {
    @apply inline-flex items-center justify-center gap-2 rounded-full bg-charcoal-900 px-5 py-3 text-base font-semibold text-cream-50 shadow-lg transition hover:bg-charcoal-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-charcoal-900/60;
    @apply disabled:cursor-not-allowed disabled:bg-charcoal-600 disabled:text-charcoal-200 disabled:shadow-none disabled:ring-0;
  }

  .control-button {
    @apply rounded-full border border-cream-400 bg-cream-100 px-4 py-2 text-sm font-semibold text-cocoa-700 transition hover:bg-cream-200 focus:outline-none focus:ring-2 focus:ring-accent-200/60 disabled:cursor-not-allowed disabled:opacity-60;
  }

  .control-button--primary {
    @apply border-transparent bg-charcoal-900 text-cream-50 hover:bg-charcoal-800 focus:ring-charcoal-900/60;
  }

  .control-button--ghost {
    @apply border-charcoal-200 bg-transparent text-cocoa-700 hover:bg-cream-200;
  }

  .control-button--toggle-active {
    @apply border-accent-400 bg-accent-200/70 text-charcoal-900;
  }

  .action-button {
    @apply inline-flex items-center justify-center gap-2 rounded-xl border border-charcoal-900 bg-charcoal-900 px-4 py-2 text-sm font-semibold text-cream-50 transition hover:bg-charcoal-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-charcoal-900/60 disabled:cursor-not-allowed disabled:opacity-60;
  }

  .action-button--accent {
    @apply border-transparent bg-accent-500 text-charcoal-900 hover:bg-accent-400 focus:ring-accent-500/60;
  }

  .collapsible-panel {
    @apply relative flex flex-col gap-3;
  }

  .collapsible-panel--plain {
    @apply rounded-2xl bg-transparent p-0;
    border-width: 0;
  }

  .collapsible-panel__controls {
    @apply flex items-center gap-2 rounded-full border border-cream-300/70 bg-cream-50/70 px-3 py-1 text-[11px] font-semibold uppercase tracking-[0.2em] text-cocoa-500;
  }

  .collapsible-panel__toggle {
    @apply inline-flex items-center gap-2 rounded-full px-3 py-1 text-[11px] font-semibold uppercase tracking-[0.2em] text-cocoa-700 transition hover:bg-cream-200/70 hover:text-charcoal-900 focus:outline-none focus-visible:ring-2 focus-visible:ring-accent-400/60;
  }

  .collapsible-panel__chevron {
    @apply text-base leading-none;
  }

  .collapsible-panel__label {
    @apply whitespace-nowrap;
  }

  .collapsible-panel__spacer {
    @apply flex-1;
  }

  .collapsible-panel__reset {
    @apply rounded-full border border-cream-300 px-3 py-1 text-[11px] font-semibold uppercase tracking-[0.15em] text-cocoa-500 transition hover:bg-cream-200/70 hover:text-charcoal-900 focus:outline-none focus-visible:ring-2 focus-visible:ring-accent-400/60 disabled:cursor-not-allowed disabled:opacity-40;
  }

  .collapsible-panel__content {
    @apply relative mt-2 w-full overflow-hidden transition-[height,opacity] duration-200 ease-in-out;
  }

  .collapsible-panel__content-inner {
    @apply h-full w-full;
  }

  .collapsible-panel--collapsed .collapsible-panel__content-inner {
    @apply pointer-events-none;
  }

  .collapsible-panel__resize-handle {
    @apply mt-2 flex h-3 w-full cursor-[ns-resize] items-center justify-center rounded-full border border-dashed border-cream-400 bg-cream-200/80 transition hover:border-accent-400 hover:bg-accent-200/60 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-accent-300;
  }

  .collapsible-panel__resize-grip {
    @apply h-1 w-14 rounded-full bg-cream-500/80;
  }

  .collapsible-panel__resize-placeholder {
    @apply mt-2 h-1 w-full;
  }
}

:root[data-theme='light'] {
  --color-scheme: light;
}

:root[data-theme='dark'] {
  --color-scheme: dark;
  --bg-base: #070b12;
  --bg-elevated: #0f1720;
  --bg-muted: #1a2533;
  --fg-base: #e2e8f0;
  --fg-muted: #a0aec0;
  --border-soft: #1f2a3a;
  --border-strong: #2d3a4d;
  --shadow-soft: rgba(15, 23, 42, 0.28);
  --shadow-strong: rgba(7, 11, 18, 0.55);
}

html.compact body {
  font-size: 0.95rem;
}

html.compact .compact-hide {
  display: none !important;
}
